# Picto å®Œæ•´æŠ€æœ¯æŒ‡å—

> **æ ¸å¿ƒé—®é¢˜**ï¼šå¦‚ä½•é€šè¿‡ Figma URL å’Œ Token è‡ªåŠ¨ç”Ÿæˆå¯ç”¨çš„ React å›¾æ ‡ç»„ä»¶ï¼Ÿ

---

## ğŸ“– å¯¼è¯»

æœ¬æ–‡æ¡£ä»é›¶å¼€å§‹è§£é‡Š Picto çš„å®Œæ•´å·¥ä½œåŸç†ï¼Œé‡‡ç”¨**å¾ªåºæ¸è¿›**çš„æ–¹å¼ï¼š
- å…ˆç†è§£æ•´ä½“é€»è¾‘ï¼ˆ30 ç§’é€Ÿè§ˆï¼‰
- å†äº†è§£å…­æ­¥æµç¨‹ï¼ˆ5 åˆ†é’Ÿå¿«è¯»ï¼‰
- æœ€åæ·±å…¥æ¯ä¸ªç»†èŠ‚ï¼ˆå®Œæ•´ç†è§£ï¼‰

**é˜…è¯»å»ºè®®**ï¼š
- ğŸ”° åˆæ¬¡é˜…è¯»ï¼šåªçœ‹"å…­æ­¥æµç¨‹æ€»è§ˆ"
- ğŸ“ æ·±å…¥å­¦ä¹ ï¼šä»å¤´åˆ°å°¾å®Œæ•´é˜…è¯»
- ğŸ”§ é—®é¢˜æ’æŸ¥ï¼šç›´æ¥è·³åˆ°"æ€§èƒ½åˆ†æ"å’Œ"é—®é¢˜è¯Šæ–­"

---

## ç›®å½•

1. [ä¸€å¥è¯æ¦‚æ‹¬](#ä¸€å¥è¯æ¦‚æ‹¬)
2. [ä¸‰ä¸ªæ ¸å¿ƒæŒ‘æˆ˜](#ä¸‰ä¸ªæ ¸å¿ƒæŒ‘æˆ˜)
3. [å…­æ­¥æµç¨‹æ€»è§ˆ](#å…­æ­¥æµç¨‹æ€»è§ˆ)
4. [è¯¦ç»†æ­¥éª¤æ‹†è§£](#è¯¦ç»†æ­¥éª¤æ‹†è§£)
5. [å®Œæ•´æ•°æ®æµ](#å®Œæ•´æ•°æ®æµ)
6. [æ€§èƒ½åˆ†æ](#æ€§èƒ½åˆ†æ)
7. [é—®é¢˜è¯Šæ–­](#é—®é¢˜è¯Šæ–­)
8. [ä¼˜åŒ–æ–¹æ¡ˆ](#ä¼˜åŒ–æ–¹æ¡ˆ)
9. [æ€»ç»“](#æ€»ç»“)

---

## ä¸€å¥è¯æ¦‚æ‹¬

```
è¯·æ±‚ Figma æ–‡ä»¶å…ƒæ•°æ® 
  â†’ é€’å½’è§£ææ–‡æ¡£æ ‘æ‰¾åˆ°å›¾æ ‡èŠ‚ç‚¹ 
    â†’ æ‰¹é‡è¯·æ±‚å¯¼å‡º SVG URL 
      â†’ ä¸‹è½½ SVG å†…å®¹ 
        â†’ æ•°æ®å¢å¼ºä¸ç¼“å­˜ 
          â†’ ç”Ÿæˆ React ç»„ä»¶
```

**å¿«é€Ÿè®°å¿†å£è¯€**ï¼š
```
è¯·æ±‚æ–‡æ¡£æ‹¿åœ°å›¾ï¼Œ
é€’å½’è§£ææ‰¾å›¾æ ‡ï¼Œ
æ‰¹é‡å¯¼å‡ºæ‹¿é“¾æ¥ï¼Œ
å¹¶å‘ä¸‹è½½è·å†…å®¹ï¼Œ
å¢å¼ºç¼“å­˜ææ•ˆç‡ï¼Œ
ä»£ç ç”Ÿæˆå‡ºç»„ä»¶ã€‚
```

---

## ä¸‰ä¸ªæ ¸å¿ƒæŒ‘æˆ˜

åœ¨ç†è§£æŠ€æœ¯æµç¨‹å‰ï¼Œå…ˆæ˜ç¡®æˆ‘ä»¬è¦è§£å†³çš„é—®é¢˜ï¼š

### æŒ‘æˆ˜ 1ï¼šå®šä½ - å›¾æ ‡åœ¨å“ªé‡Œï¼Ÿ

**é—®é¢˜**ï¼šFigma æ–‡ä»¶åŒ…å«æˆåƒä¸Šä¸‡ä¸ªèŠ‚ç‚¹ï¼ˆç”»å¸ƒã€æ¡†æ¶ã€ç»„ä»¶ã€æ–‡æœ¬...ï¼‰ï¼Œå¦‚ä½•æ‰¾åˆ°å›¾æ ‡ï¼Ÿ

**è§£å†³**ï¼š
1. è¯·æ±‚å®Œæ•´çš„æ–‡æ¡£æ ‘ç»“æ„
2. é€’å½’éå†æ‰€æœ‰èŠ‚ç‚¹
3. ç­›é€‰å‡º `COMPONENT` ç±»å‹çš„èŠ‚ç‚¹

---

### æŒ‘æˆ˜ 2ï¼šè·å– - å¦‚ä½•æ‹¿åˆ° SVG æ•°æ®ï¼Ÿ

**é—®é¢˜**ï¼šFigma ä¸ä¼šåœ¨æ–‡æ¡£æ ‘ä¸­ç›´æ¥è¿”å› SVG å†…å®¹ï¼ˆæ€§èƒ½è€ƒè™‘ï¼‰ã€‚

**è§£å†³**ï¼š
1. è°ƒç”¨ Figma å¯¼å‡º APIï¼Œè·å–ä¸´æ—¶ S3 URL
2. ä» S3 URL ä¸‹è½½çœŸå®çš„ SVG çŸ¢é‡æ•°æ®

**ä¸ºä»€ä¹ˆåˆ†ä¸¤æ­¥ï¼Ÿ**
- æ–‡æ¡£æ ‘è¯·æ±‚å¿«é€Ÿï¼ˆ< 1 ç§’ï¼‰ï¼Œå¯ä»¥é¢‘ç¹è°ƒç”¨
- SVG å¯¼å‡ºè®¡ç®—å¯†é›†ï¼ŒæŒ‰éœ€è§¦å‘

---

### æŒ‘æˆ˜ 3ï¼šè½¬æ¢ - å¦‚ä½•å˜æˆ React ç»„ä»¶ï¼Ÿ

**é—®é¢˜**ï¼šSVG å±æ€§å’Œ React JSX ä¸å…¼å®¹ã€‚

**ä¾‹å¦‚**ï¼š
```xml
<!-- SVG åŸå§‹æ ¼å¼ -->
<path stroke-width="2" xlink:href="#icon" style="opacity: 0.5"/>
```

```jsx
{/* React JSX æ ¼å¼ */}
<path strokeWidth={2} xlinkHref="#icon" style={{opacity: '0.5'}}/>
```

**è§£å†³**ï¼š
1. kebab-case â†’ camelCase (`stroke-width` â†’ `strokeWidth`)
2. XML å‘½åç©ºé—´è½¬æ¢ (`xlink:href` â†’ `xlinkHref`)
3. CSS å­—ç¬¦ä¸² â†’ å¯¹è±¡ (`style="..."` â†’ `style={{...}}`)

---

## å…­æ­¥æµç¨‹æ€»è§ˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â‘  è¯·æ±‚æ–‡ä»¶å…ƒæ•°æ®                                                  â”‚
â”‚    ç›®çš„ï¼šè·å–æ–‡æ¡£ç»“æ„"åœ°å›¾"                                       â”‚
â”‚    è¾“å…¥ï¼šFigma URL + Token                                       â”‚
â”‚    è¾“å‡ºï¼šæ–‡æ¡£æ ‘ + ç‰ˆæœ¬å·                                          â”‚
â”‚    è€—æ—¶ï¼š~1 ç§’                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â‘¡ é€’å½’è§£ææ–‡æ¡£æ ‘                                                  â”‚
â”‚    ç›®çš„ï¼šæ‰¾åˆ°æ‰€æœ‰å›¾æ ‡çš„ä½ç½®                                       â”‚
â”‚    è¾“å…¥ï¼šæ–‡æ¡£æ ‘                                                   â”‚
â”‚    è¾“å‡ºï¼šå›¾æ ‡èŠ‚ç‚¹ ID åˆ—è¡¨ [id, name, width, height]              â”‚
â”‚    è€—æ—¶ï¼š~0.1 ç§’                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â‘¢ æ‰¹é‡å¯¼å‡º SVG                                                   â”‚
â”‚    ç›®çš„ï¼šè·å– SVG ä¸‹è½½é“¾æ¥                                        â”‚
â”‚    è¾“å…¥ï¼šå›¾æ ‡èŠ‚ç‚¹ ID åˆ—è¡¨                                         â”‚
â”‚    è¾“å‡ºï¼šS3 ä¸´æ—¶ URL æ˜ å°„ {id â†’ url}                             â”‚
â”‚    è€—æ—¶ï¼š~10 ç§’ï¼ˆæ‰¹å¤„ç†ï¼‰                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â‘£ ä¸‹è½½ SVG å†…å®¹                                                  â”‚
â”‚    ç›®çš„ï¼šè·å–çœŸå®çŸ¢é‡æ•°æ®                                         â”‚
â”‚    è¾“å…¥ï¼šS3 URL åˆ—è¡¨                                             â”‚
â”‚    è¾“å‡ºï¼šSVG å­—ç¬¦ä¸² {id â†’ svg}                                   â”‚
â”‚    è€—æ—¶ï¼š~5 ç§’ï¼ˆå¹¶å‘ä¸‹è½½ï¼‰                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â‘¤ æ•°æ®å¢å¼ºä¸ç¼“å­˜                                                  â”‚
â”‚    ç›®çš„ï¼šæå–å…ƒä¿¡æ¯å¹¶å­˜å‚¨                                         â”‚
â”‚    è¾“å…¥ï¼šå›¾æ ‡å…ƒæ•°æ® + SVG å†…å®¹                                    â”‚
â”‚    è¾“å‡ºï¼šIconMetadata + ç¼“å­˜æ–‡ä»¶                                  â”‚
â”‚    è€—æ—¶ï¼š~0.5 ç§’                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â‘¥ ç”Ÿæˆ React ç»„ä»¶                                                â”‚
â”‚    ç›®çš„ï¼šè½¬æ¢ä¸ºå¯ç”¨ä»£ç                                            â”‚
â”‚    è¾“å…¥ï¼šIconMetadata                                            â”‚
â”‚    è¾“å‡ºï¼š.tsx ç»„ä»¶æ–‡ä»¶                                            â”‚
â”‚    è€—æ—¶ï¼š~2 ç§’                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“
                    icons/Iconlogout.tsx
```

**æ€»è€—æ—¶**ï¼šçº¦ 18.6 ç§’ â‰ˆ 4.5 åˆ†é’Ÿï¼ˆåŒ…å«é‡è¯•å’Œé”™è¯¯å¤„ç†ï¼‰

---

## è¯¦ç»†æ­¥éª¤æ‹†è§£

### æ­¥éª¤ â‘  è¯·æ±‚æ–‡ä»¶å…ƒæ•°æ®

#### ç›®çš„

è·å– Figma æ–‡ä»¶çš„å®Œæ•´ç»“æ„ï¼Œå°±åƒæ‹¿åˆ°ä¸€å¼ "åœ°å›¾"ï¼Œå‘Šè¯‰æˆ‘ä»¬å›¾æ ‡åˆ†å¸ƒåœ¨å“ªäº›èŠ‚ç‚¹ã€‚

#### è¾“å…¥

**ç”¨æˆ·é…ç½®**ï¼š
```typescript
// picto.config.ts
{
  sources: [{
    type: 'figma',
    url: 'https://www.figma.com/file/lNtZjYrzLjkZohZLP0OVnz/Gaoding-å›¾æ ‡åº“?node-id=615:324',
    token: '291200-0792e958-bc89-47ab-8a04-12478816ec02'
  }]
}
```

#### å¤„ç†è¿‡ç¨‹

**ç¬¬ 1 æ­¥ï¼šæå– File Key**

```typescript
// ä» URL ä¸­æå–æ–‡ä»¶ ID
url: 'https://www.figma.com/file/lNtZjYrzLjkZohZLP0OVnz/...'
                                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                        File Key

fileKey = "lNtZjYrzLjkZohZLP0OVnz"
```

**ç¬¬ 2 æ­¥ï¼šè°ƒç”¨ Figma API**

```http
GET https://api.figma.com/v1/files/lNtZjYrzLjkZohZLP0OVnz
Headers:
  X-Figma-Token: 291200-0792e958-bc89-47ab-8a04-12478816ec02
```

#### è¾“å‡ºï¼ˆAPI å“åº”ï¼‰

```json
{
  "name": "Gaoding-å›¾æ ‡åº“",
  "version": "1234567890",              // âš ï¸ é‡è¦ï¼šç”¨äºå¿«é€Ÿæ£€æµ‹æ–‡ä»¶æ˜¯å¦å˜åŒ–
  "lastModified": "2024-01-20T10:30:00Z",
  "document": {                         // å®Œæ•´çš„æ–‡æ¡£æ ‘ï¼ˆæ ¸å¿ƒæ•°æ®ï¼‰
    "id": "0:0",
    "type": "DOCUMENT",
    "name": "Document",
    "children": [
      {
        "id": "0:1",
        "type": "CANVAS",
        "name": "Page 1",
        "children": [
          {
            "id": "615:324",
            "type": "FRAME",
            "name": "é€šç”¨å›¾æ ‡",
            "children": [
              {
                "id": "615:325",
                "type": "COMPONENT",
                "name": "é€šç”¨å›¾æ ‡/logout",
                "visible": true,
                "absoluteBoundingBox": {
                  "x": 100,
                  "y": 200,
                  "width": 24,
                  "height": 24
                }
              },
              {
                "id": "615:326",
                "type": "COMPONENT",
                "name": "é€šç”¨å›¾æ ‡/home",
                "visible": true,
                "absoluteBoundingBox": {
                  "x": 150,
                  "y": 200,
                  "width": 24,
                  "height": 24
                }
              }
              // ... æ›´å¤šå›¾æ ‡èŠ‚ç‚¹
            ]
          }
        ]
      }
    ]
  },
  "components": {
    "615:325": {
      "key": "abc123def456",
      "name": "logout",
      "description": "é€€å‡ºç™»å½•å›¾æ ‡"
    }
  }
}
```

#### å…³é”®ç†è§£

- âœ… **è¿™ä¸€æ­¥åªæ‹¿åˆ°ç»“æ„ï¼Œæ²¡æœ‰ SVG å†…å®¹**
- âœ… `document` æ˜¯ä¸€ä¸ª**æ ‘å½¢ç»“æ„**ï¼ˆDOCUMENT â†’ CANVAS â†’ FRAME â†’ COMPONENTï¼‰
- âœ… `version` å­—æ®µå¾ˆé‡è¦ï¼Œå¯ä»¥ç”¨æ¥å¿«é€Ÿåˆ¤æ–­æ–‡ä»¶æ˜¯å¦å˜åŒ–ï¼ˆ**å½“å‰æœªä½¿ç”¨ï¼Œæ˜¯ä¼˜åŒ–ç‚¹**ï¼‰
- âœ… `components` æä¾›äº†ç»„ä»¶çš„å…ƒæ•°æ®ï¼ˆåç§°ã€æè¿°ç­‰ï¼‰

---

### æ­¥éª¤ â‘¡ é€’å½’è§£ææ–‡æ¡£æ ‘

#### ç›®çš„

ä»å¤æ‚çš„æ–‡æ¡£æ ‘ä¸­æ‰¾å‡ºæ‰€æœ‰çš„å›¾æ ‡èŠ‚ç‚¹ï¼Œå°±åƒåœ¨åœ°å›¾ä¸Šæ ‡è®°å‡ºå®è—ä½ç½®ã€‚

#### è¾“å…¥

```javascript
// æ¥è‡ªæ­¥éª¤ â‘  çš„ document å­—æ®µ
document: {
  type: "DOCUMENT",
  children: [ /* å¤šå±‚åµŒå¥—çš„èŠ‚ç‚¹ */ ]
}
```

#### å¤„ç†é€»è¾‘

**éå†ç®—æ³•ï¼ˆé€’å½’ï¼‰**ï¼š

```typescript
function traverseNode(node, callback) {
  callback(node)  // å¤„ç†å½“å‰èŠ‚ç‚¹
  
  if (node.children) {
    // é€’å½’å¤„ç†æ‰€æœ‰å­èŠ‚ç‚¹
    node.children.forEach(child => {
      traverseNode(child, callback)
    })
  }
}

// ä½¿ç”¨ç¤ºä¾‹
traverseNode(document, node => {
  // åªå…³æ³¨å›¾æ ‡ç±»å‹çš„èŠ‚ç‚¹
  if (node.type === 'COMPONENT' && node.visible !== false) {
    icons.push(parseNode(node))
  }
})
```

**è§£æå•ä¸ªèŠ‚ç‚¹**ï¼š

```typescript
function parseNode(node) {
  // 1. è§£æåç§°å’Œåˆ†ç±»
  //    "é€šç”¨å›¾æ ‡/logout" â†’ category: "é€šç”¨å›¾æ ‡", name: "logout"
  const parts = node.name.split('/')
  const category = parts[0]           // "é€šç”¨å›¾æ ‡"
  const displayName = parts[1]        // "logout"
  
  // 2. æ¸…ç†åç§°ï¼ˆç§»é™¤ç‰¹æ®Šå­—ç¬¦ï¼‰
  const name = displayName
    .toLowerCase()
    .replace(/[^a-z0-9-_]/g, '-')     // "logout"
  
  // 3. æå–å°ºå¯¸
  const { width, height } = node.absoluteBoundingBox
  
  return {
    id: node.id,           // "615:325"
    name: name,            // "logout"
    displayName: displayName,  // "logout"
    category: category,    // "é€šç”¨å›¾æ ‡"
    width: width,          // 24
    height: height         // 24
  }
}
```

#### è¾“å‡º

```javascript
// ParsedIcon[] æ•°ç»„
[
  {
    id: "615:325",
    name: "logout",
    displayName: "logout",
    category: "é€šç”¨å›¾æ ‡",
    width: 24,
    height: 24
    // âš ï¸ æ³¨æ„ï¼šæ­¤æ—¶æ²¡æœ‰ SVG å†…å®¹
  },
  {
    id: "615:326",
    name: "home",
    displayName: "home",
    category: "é€šç”¨å›¾æ ‡",
    width: 24,
    height: 24
  }
  // ... å…± 130 ä¸ªå›¾æ ‡
]
```

#### å…³é”®ç†è§£

- âœ… æ–‡æ¡£æ ‘å¯èƒ½æœ‰ 5-6 å±‚åµŒå¥—ï¼š`DOCUMENT â†’ CANVAS â†’ FRAME â†’ GROUP â†’ COMPONENT`
- âœ… ç­›é€‰æ¡ä»¶ï¼š`node.type === 'COMPONENT'` ä¸” `node.visible !== false`
- âœ… åç§°è§£æï¼šæ”¯æŒ `åˆ†ç±»/åç§°` æ ¼å¼ï¼ˆå¦‚ `é€šç”¨å›¾æ ‡/logout`ï¼‰
- âœ… **æ­¤æ—¶ä»ç„¶æ²¡æœ‰ SVG å†…å®¹**ï¼Œåªæœ‰èŠ‚ç‚¹çš„å…ƒæ•°æ®

---

### æ­¥éª¤ â‘¢ æ‰¹é‡å¯¼å‡º SVG

#### ç›®çš„

å‘Šè¯‰ Figma æœåŠ¡å™¨"æˆ‘éœ€è¦è¿™äº›å›¾æ ‡çš„ SVG"ï¼Œè·å–ä¸‹è½½é“¾æ¥ã€‚

#### è¾“å…¥

```javascript
fileKey: "lNtZjYrzLjkZohZLP0OVnz"
nodeIds: ["615:325", "615:326", ..., "615:454"]  // 130 ä¸ªèŠ‚ç‚¹ ID
```

#### å¤„ç†é€»è¾‘

**æ‰¹å¤„ç†ç­–ç•¥**ï¼š

```typescript
const BATCH_SIZE = 100  // æ¯æ‰¹æœ€å¤š 100 ä¸ªå›¾æ ‡

// 130 ä¸ªå›¾æ ‡æ‹†åˆ†ä¸º 2 ä¸ªæ‰¹æ¬¡
æ‰¹æ¬¡ 1: nodeIds[0-99]   â†’ "615:325,615:326,...,615:424"  (100 ä¸ª)
æ‰¹æ¬¡ 2: nodeIds[100-129] â†’ "615:425,615:426,...,615:454"  (30 ä¸ª)
```

**ä¸ºä»€ä¹ˆéœ€è¦æ‰¹å¤„ç†ï¼Ÿ**
- URL é•¿åº¦é™åˆ¶ï¼šæµè§ˆå™¨å’ŒæœåŠ¡å™¨é€šå¸¸é™åˆ¶ ~2000 å­—ç¬¦
- 100 ä¸ª ID Ã— å¹³å‡ 8 å­—ç¬¦ = 800 å­—ç¬¦ï¼ˆå®‰å…¨èŒƒå›´ï¼‰
- è¶…è¿‡ä¼šè¿”å› `413 Request Entity Too Large` é”™è¯¯

**API è¯·æ±‚**ï¼š

```http
// æ‰¹æ¬¡ 1
GET https://api.figma.com/v1/images/lNtZjYrzLjkZohZLP0OVnz?ids=615:325,615:326,...&format=svg&scale=1
Headers:
  X-Figma-Token: 291200-0792e958-bc89-47ab-8a04-12478816ec02

// æ‰¹æ¬¡ 2
GET https://api.figma.com/v1/images/lNtZjYrzLjkZohZLP0OVnz?ids=615:425,615:426,...&format=svg&scale=1
Headers:
  X-Figma-Token: 291200-0792e958-bc89-47ab-8a04-12478816ec02
```

#### è¾“å‡º

```json
{
  "err": null,
  "images": {
    "615:325": "https://s3-alpha.figma.com/img/a1b2/c3d4/e5f6/.../abc123.svg?Expires=1737648000&Signature=xxx",
    "615:326": "https://s3-alpha.figma.com/img/z9y8/x7w6/v5u4/.../def456.svg?Expires=1737648000&Signature=yyy",
    "615:327": "https://s3-alpha.figma.com/img/j3i2/h1g0/f9e8/.../ghi789.svg?Expires=1737648000&Signature=zzz"
    // ... 130 ä¸ªå›¾æ ‡çš„ S3 URL
  },
  "status": 200
}
```

#### å…³é”®ç†è§£

- âœ… è¿”å›çš„æ˜¯**ä¸´æ—¶çš„ AWS S3 é¢„ç­¾å URL**
- âœ… URL æœ‰æ•ˆæœŸçº¦ **5 åˆ†é’Ÿ**ï¼ˆ`Expires` å‚æ•°ï¼‰
- âœ… URL è‡ªå¸¦ç­¾åï¼Œæ— éœ€ Figma Token å³å¯è®¿é—®
- âœ… è¿™ä¸€æ­¥è§¦å‘ Figma æœåŠ¡å™¨**å®æ—¶æ¸²æŸ“ SVG**ï¼ˆè®¡ç®—å¯†é›†ï¼Œè€—æ—¶é•¿ï¼‰
- âœ… **ä¸èƒ½é•¿æœŸå­˜å‚¨è¿™äº› URL**ï¼Œå¿…é¡»ç«‹å³ä¸‹è½½

---

### æ­¥éª¤ â‘£ ä¸‹è½½ SVG å†…å®¹

#### ç›®çš„

ä»ä¸´æ—¶ S3 URL ä¸‹è½½çœŸå®çš„ SVG çŸ¢é‡æ•°æ®ã€‚

#### è¾“å…¥

```javascript
[
  { id: "615:325", url: "https://s3-alpha.figma.com/img/.../abc123.svg?..." },
  { id: "615:326", url: "https://s3-alpha.figma.com/img/.../def456.svg?..." }
  // ... 130 ä¸ª URL
]
```

#### å¤„ç†é€»è¾‘

**å¹¶å‘æ§åˆ¶**ï¼š

```typescript
const CONCURRENCY = 5  // åŒæ—¶ä¸‹è½½ 5 ä¸ª SVG

// 130 ä¸ªå›¾æ ‡ Ã· 5 å¹¶å‘ = 26 æ‰¹æ¬¡
for (let i = 0; i < urls.length; i += CONCURRENCY) {
  const batch = urls.slice(i, i + CONCURRENCY)
  
  // å¹¶è¡Œä¸‹è½½è¿™ä¸€æ‰¹
  await Promise.all(
    batch.map(async ({ id, url }) => {
      const svg = await fetch(url).then(res => res.text())
      results.push({ id, svg })
    })
  )
  
  console.log(`è¿›åº¦: ${Math.min(i + CONCURRENCY, urls.length)}/${urls.length}`)
}
```

**HTTP è¯·æ±‚**ï¼š

```http
GET https://s3-alpha.figma.com/img/a1b2/c3d4/.../abc123.svg?Expires=...&Signature=...
(æ— éœ€ Headersï¼ŒURL è‡ªå¸¦ç­¾å)
```

#### è¾“å‡º

```javascript
[
  {
    id: "615:325",
    svg: `<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
  <path d="M17.3916 2.875C20.0168 4.62049..." stroke="#333" stroke-width="2"/>
  <path d="M12.75 11H11.25V2H12.75V11Z" fill="black"/>
</svg>`
  },
  {
    id: "615:326",
    svg: `<svg width="24" height="24" viewBox="0 0 24 24" fill="none">
  <rect x="3" y="3" width="7" height="7" stroke="#333" stroke-width="1.5"/>
  <rect x="14" y="3" width="7" height="7" stroke="#333" stroke-width="1.5"/>
</svg>`
  }
  // ... 130 ä¸ªå®Œæ•´çš„ SVG å­—ç¬¦ä¸²
]
```

#### å…³é”®ç†è§£

- âœ… è¿™ä¸€æ­¥æ˜¯**æœ€è€—æ—¶çš„ç¯èŠ‚**ï¼ˆç½‘ç»œ I/O å¯†é›†ï¼‰
- âœ… 130 ä¸ªå›¾æ ‡ Ã· 5 å¹¶å‘ = 26 æ‰¹æ¬¡ Ã— 200ms â‰ˆ **5 ç§’**
- âœ… SVG å†…å®¹æ˜¯**çº¯æ–‡æœ¬ XML æ ¼å¼**
- âœ… **æ­¤æ—¶ç»ˆäºæ‹¿åˆ°äº† SVG æ•°æ®**

---

### æ­¥éª¤ â‘¤ æ•°æ®å¢å¼ºä¸ç¼“å­˜

#### ç›®çš„

åˆå¹¶å…ƒæ•°æ®å’Œ SVG å†…å®¹ï¼Œæå–æœ‰ç”¨ä¿¡æ¯ï¼ˆviewBoxã€colorsã€hashï¼‰ï¼Œå¹¶å­˜å‚¨åˆ°æœ¬åœ°ç¼“å­˜ã€‚

#### è¾“å…¥

```javascript
// æ¥è‡ªæ­¥éª¤ â‘¡
icons: [
  { id: "615:325", name: "logout", width: 24, height: 24 }
]

// æ¥è‡ªæ­¥éª¤ â‘£
svgMap: {
  "615:325": "<svg>...</svg>"
}
```

#### å¤„ç†é€»è¾‘

**æ•°æ®åˆå¹¶ä¸å¢å¼º**ï¼š

```typescript
for (const icon of icons) {
  const svg = svgMap.get(icon.id)
  
  // 1. æ¸…ç† SVGï¼ˆç§»é™¤æ³¨é‡Šã€å‹ç¼©ç©ºç™½ï¼‰
  const cleanedSVG = cleanSVG(svg)
  
  // 2. æå– viewBox å±æ€§
  const viewBox = svg.match(/viewBox=["']([^"']+)["']/)?.[1]
  // ç¤ºä¾‹: "0 0 24 24"
  
  // 3. æå–é¢œè‰²åˆ—è¡¨
  const colorRegex = /#[0-9A-Fa-f]{3,8}|rgb\([^)]+\)|rgba\([^)]+\)/g
  const colors = [...new Set(svg.match(colorRegex) || [])]
  // ç¤ºä¾‹: ["#333", "#fff", "#ff0000"]
  
  // 4. ç”Ÿæˆå†…å®¹å“ˆå¸Œï¼ˆç”¨äºå˜æ›´æ£€æµ‹ï¼‰
  const hash = generateHash(svg)
  // ç¤ºä¾‹: "abc123xyz"
  
  metadata.push({
    // åŸºç¡€ä¿¡æ¯
    id: icon.id,
    name: icon.name,
    displayName: icon.displayName,
    category: icon.category,
    
    // SVG æ•°æ®
    svg: cleanedSVG,
    viewBox: viewBox,
    colors: colors,
    width: icon.width,
    height: icon.height,
    hash: hash,
    
    // æ¥æºä¿¡æ¯
    source: {
      type: "figma",
      fileKey: "lNtZjYrzLjkZohZLP0OVnz",
      nodeId: icon.id,
      url: "https://www.figma.com/file/...",
      lastSynced: new Date()
    },
    
    generatedAt: new Date()
  })
}
```

**ç¼“å­˜å­˜å‚¨**ï¼š

```typescript
// å†™å…¥ç¼“å­˜æ–‡ä»¶
await cacheManager.cacheIcons(cacheKey, metadata)
```

#### è¾“å‡ºï¼ˆç¼“å­˜æ–‡ä»¶ï¼‰

**æ–‡ä»¶è·¯å¾„**ï¼š`.picto/cache/icons_figma_xxx.json`

```json
{
  "key": "icons:figma:{...}",
  "value": [
    {
      "id": "615:325",
      "name": "logout",
      "displayName": "logout",
      "category": "é€šç”¨å›¾æ ‡",
      "svg": "<svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\"><path d=\"...\"/></svg>",
      "viewBox": "0 0 24 24",
      "colors": ["#333"],
      "width": 24,
      "height": 24,
      "hash": "abc123xyz",
      "source": {
        "type": "figma",
        "fileKey": "lNtZjYrzLjkZohZLP0OVnz",
        "nodeId": "615:325",
        "url": "https://www.figma.com/file/...",
        "lastSynced": "2024-01-22T10:00:00.000Z"
      },
      "generatedAt": "2024-01-22T10:00:05.000Z"
    }
    // ... 130 ä¸ªå›¾æ ‡çš„å®Œæ•´æ•°æ®
  ],
  "timestamp": 1737561600000,  // ç¼“å­˜åˆ›å»ºæ—¶é—´
  "ttl": 3600                  // è¿‡æœŸæ—¶é—´ï¼ˆç§’ï¼‰
}
```

#### å…³é”®ç†è§£

- âœ… **hash çš„ä½œç”¨**ï¼šå¿«é€Ÿæ£€æµ‹å›¾æ ‡å†…å®¹æ˜¯å¦å˜åŒ–ï¼ˆæ¯”å¯¹æ¯”æ•´ä¸ª SVG å­—ç¬¦ä¸²å¿«å¾—å¤šï¼‰
- âœ… **colors æå–**ï¼šå¯ç”¨äºç”Ÿæˆè°ƒè‰²æ¿æˆ–ä¸»é¢˜
- âœ… **viewBox æå–**ï¼šç”¨äº SVG ç¼©æ”¾å’Œå“åº”å¼å¸ƒå±€
- âœ… **ç¼“å­˜æœºåˆ¶**ï¼šä¸‹æ¬¡ pull æ—¶å¯ä»¥å¿«é€Ÿè¿”å›ï¼Œé¿å…é‡å¤è¯·æ±‚
- âœ… **TTL æ£€æŸ¥**ï¼š3600 ç§’ï¼ˆ1 å°æ—¶ï¼‰åç¼“å­˜è¿‡æœŸ

---

### æ­¥éª¤ â‘¥ ç”Ÿæˆ React ç»„ä»¶

#### ç›®çš„

å°† SVG æ•°æ®è½¬æ¢ä¸ºå¯ç”¨çš„ React/TypeScript ç»„ä»¶æ–‡ä»¶ã€‚

#### è¾“å…¥

```javascript
{
  id: "615:325",
  name: "logout",
  displayName: "logout",
  category: "é€šç”¨å›¾æ ‡",
  svg: '<svg width="24" height="24" viewBox="0 0 24 24"><path d="..." stroke="#333" stroke-width="2"/></svg>',
  viewBox: "0 0 24 24",
  width: 24,
  height: 24
}
```

#### å¤„ç†é€»è¾‘

**ç¬¬ 1 æ­¥ï¼šç”Ÿæˆç»„ä»¶å**

```typescript
// åº”ç”¨å‘½åè§„åˆ™
naming: {
  case: 'pascal',    // PascalCase
  prefix: 'Icon'     // å‰ç¼€
}

// è½¬æ¢
"logout" â†’ "Iconlogout"
```

**ç¬¬ 2 æ­¥ï¼šSVG è½¬ JSX**

```typescript
function transformSVGToJSX(svg) {
  let result = svg
  
  // 1. ç§»é™¤ Figma ç‰¹å®šå±æ€§
  result = result.replace(/\s+data-figma-[a-z-]+="[^"]*"/gi, '')
  
  // 2. è½¬æ¢ XML å‘½åç©ºé—´
  result = result.replace(/\sxlink:href=/g, ' xlinkHref=')
  result = result.replace(/\sxmlns:xlink=/g, ' xmlnsXlink=')
  
  // 3. è½¬æ¢ style å±æ€§ï¼ˆå­—ç¬¦ä¸² â†’ å¯¹è±¡ï¼‰
  result = result.replace(
    /\sstyle="([^"]+)"/g,
    (match, styleStr) => {
      // "opacity: 0.5; font-size: 14px"
      const styles = styleStr.split(';')
        .map(s => {
          const [key, value] = s.split(':')
          const camelKey = kebabToCamel(key.trim())  // opacity, fontSize
          return `${camelKey}: '${value.trim()}'`
        })
      return ` style={{${styles.join(', ')}}}`
      // style={{opacity: '0.5', fontSize: '14px'}}
    }
  )
  
  // 4. è½¬æ¢ kebab-case å±æ€§ä¸º camelCase
  result = result.replace(
    /\s([a-z-]+)="([^"]+)"/g,
    (match, attrName, attrValue) => {
      const camelAttr = kebabToCamel(attrName)
      // stroke-width â†’ strokeWidth
      // stroke-linecap â†’ strokeLinecap
      
      // æ•°å­—å€¼è½¬ä¸º JSX è¡¨è¾¾å¼
      if (/^\d+(\.\d+)?$/.test(attrValue)) {
        return ` ${camelAttr}={${attrValue}}`
        // strokeWidth={2}
      }
      return ` ${camelAttr}="${attrValue}"`
      // strokeLinecap="round"
    }
  )
  
  return result
}

// è½¬æ¢ç¤ºä¾‹
è¾“å…¥: '<path d="..." stroke="#333" stroke-width="2" stroke-linecap="round"/>'
è¾“å‡º: '<path d="..." stroke="#333" strokeWidth={2} strokeLinecap="round"/>'
```

**ç¬¬ 3 æ­¥ï¼šç”Ÿæˆç»„ä»¶ä»£ç **

```typescript
const componentCode = `
import React from 'react'

export interface IconlogoutProps extends React.SVGProps<SVGSVGElement> {}

/**
 * ${icon.displayName}
 * @category ${icon.category}
 */
export const Iconlogout = React.memo((props: IconlogoutProps) => {
  return (
    <svg
      xmlns="http://www.w3.org/2000/svg"
      width="${icon.width}"
      height="${icon.height}"
      viewBox="${icon.viewBox}"
      fill="none"
      {...props}
    >
      ${jsxContent}
    </svg>
  )
})

Iconlogout.displayName = 'Iconlogout'

export default Iconlogout
`
```

#### è¾“å‡ºï¼ˆç»„ä»¶æ–‡ä»¶ï¼‰

**æ–‡ä»¶**ï¼š`icons/Iconlogout.tsx`

```typescript
import React from 'react'

export interface IconlogoutProps extends React.SVGProps<SVGSVGElement> {}

/**
 * logout
 * @category é€šç”¨å›¾æ ‡
 */
export const Iconlogout = React.memo((props: IconlogoutProps) => {
  return (
    <svg
      xmlns="http://www.w3.org/2000/svg"
      width="24"
      height="24"
      viewBox="0 0 24 24"
      fill="none"
      {...props}
    >
      <path
        d="M17.3916 2.875C20.0168 4.62049..."
        fill="black"
      />
      <path
        d="M12.75 11H11.25V2H12.75V11Z"
        fill="black"
      />
    </svg>
  )
})

Iconlogout.displayName = 'Iconlogout'

export default Iconlogout
```

**åŒæ—¶ç”Ÿæˆçš„å…¶ä»–æ–‡ä»¶**ï¼š

**`icons/index.ts`**ï¼š
```typescript
export { Iconlogout, default as Iconlogout } from './Iconlogout'
export { Iconhome, default as Iconhome } from './Iconhome'
export { Iconuser, default as Iconuser } from './Iconuser'
// ... 130 ä¸ªå¯¼å‡º

export const allIcons = {
  Iconlogout,
  Iconhome,
  Iconuser,
  // ...
}
```

**`icons/types.ts`**ï¼š
```typescript
export interface IconInfo {
  name: string
  displayName: string
  category: string
  width: number
  height: number
  colors: string[]
}

export const iconMetadata: Record<string, IconInfo> = {
  Iconlogout: {
    name: 'logout',
    displayName: 'logout',
    category: 'é€šç”¨å›¾æ ‡',
    width: 24,
    height: 24,
    colors: ['#333'],
  },
  // ... æ›´å¤šå›¾æ ‡å…ƒæ•°æ®
}
```

#### å…³é”®ç†è§£

- âœ… **SVG â†’ JSX è½¬æ¢è§„åˆ™**ï¼š
  - `stroke-width` â†’ `strokeWidth`
  - `xlink:href` â†’ `xlinkHref`
  - `style="..."` â†’ `style={{...}}`
  - ç§»é™¤ `data-figma-*` å±æ€§
- âœ… **å‘½åè§„åˆ™å¯é…ç½®**ï¼š`pascal` / `camel` / `kebab` + å‰ç¼€/åç¼€
- âœ… **TypeScript æ”¯æŒ**ï¼šç”Ÿæˆ Props æ¥å£
- âœ… **React.memo ä¼˜åŒ–**ï¼šé¿å…ä¸å¿…è¦çš„é‡æ¸²æŸ“
- âœ… **displayName è®¾ç½®**ï¼šä¾¿äº React DevTools è°ƒè¯•

---

## å®Œæ•´æ•°æ®æµ

### æ•°æ®æ ¼å¼æ¼”å˜é“¾è·¯

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 0. ç”¨æˆ·è¾“å…¥                              â”‚
â”‚ url + token                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. File Key (string)                    â”‚
â”‚ "lNtZjYrzLjkZohZLP0OVnz"               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2. FigmaFile (object)                   â”‚
â”‚ {                                       â”‚
â”‚   document: {...},  â† éœ€è¦éå†          â”‚
â”‚   components: {...},                    â”‚
â”‚   version: "..."    â† æœªä½¿ç”¨ï¼ˆä¼˜åŒ–ç‚¹ï¼‰  â”‚
â”‚ }                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3. ParsedIcon[] (array)                 â”‚
â”‚ [{                                      â”‚
â”‚   id: "615:325",                        â”‚
â”‚   name: "logout",                       â”‚
â”‚   width: 24,                            â”‚
â”‚   height: 24                            â”‚
â”‚   // âš ï¸ æ—  SVG å†…å®¹                    â”‚
â”‚ }]                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 4. S3 URL Map (object)                  â”‚
â”‚ {                                       â”‚
â”‚   "615:325": "https://s3.../abc.svg"   â”‚
â”‚   // âš ï¸ ä¸´æ—¶ URLï¼Œ5åˆ†é’Ÿè¿‡æœŸ             â”‚
â”‚ }                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 5. SVG Content Map (object)             â”‚
â”‚ {                                       â”‚
â”‚   "615:325": "<svg>...</svg>"          â”‚
â”‚   // âœ… çœŸå®çš„ SVG å­—ç¬¦ä¸²               â”‚
â”‚ }                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 6. IconMetadata[] (array)               â”‚
â”‚ [{                                      â”‚
â”‚   id, name, svg, hash,                  â”‚
â”‚   colors, viewBox, source, ...          â”‚
â”‚   // âœ… å®Œæ•´çš„å›¾æ ‡æ•°æ®                  â”‚
â”‚ }]                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 7. Cache File (json)                    â”‚
â”‚ .picto/cache/icons_figma_xxx.json      â”‚
â”‚ {                                       â”‚
â”‚   value: IconMetadata[],                â”‚
â”‚   timestamp: 1737561600000,             â”‚
â”‚   ttl: 3600                             â”‚
â”‚ }                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 8. React Component (.tsx)               â”‚
â”‚ icons/Iconlogout.tsx                    â”‚
â”‚ import React from 'react'               â”‚
â”‚ export const Iconlogout = ...           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ¯æ­¥ç›®çš„å’Œæ•°æ®å˜åŒ–

| æ­¥éª¤ | è¾“å…¥ | è¾“å‡º | æ˜¯å¦åŒ…å« SVG | æ•°æ®é‡ |
|------|------|------|-------------|--------|
| â‘  | URL + Token | FigmaFile | âŒ | ~1 MB JSON |
| â‘¡ | FigmaFile.document | ParsedIcon[] | âŒ | ~10 KB |
| â‘¢ | Node IDs | S3 URL Map | âŒ | ~50 KB |
| â‘£ | S3 URLs | SVG Map | âœ… | ~500 KB |
| â‘¤ | ParsedIcon[] + SVG Map | IconMetadata[] | âœ… | ~600 KB |
| â‘¥ | IconMetadata | Cache File | âœ… | ~600 KB |
| â‘¦ | IconMetadata | .tsx Files | âœ… | ~1 MB |

---

## æ€§èƒ½åˆ†æ

### æ—¶é—´æ¶ˆè€—åˆ†å¸ƒï¼ˆ130 ä¸ªå›¾æ ‡ï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â‘  è¯·æ±‚æ–‡ä»¶å…ƒæ•°æ®        ~1 ç§’   â–ˆâ–ˆâ–ˆâ–ˆ                â”‚
â”‚ â‘¡ é€’å½’è§£ææ–‡æ¡£æ ‘        ~0.1 ç§’ â–Œ                   â”‚
â”‚ â‘¢ æ‰¹é‡å¯¼å‡º SVG          ~10 ç§’  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ”‚
â”‚ â‘£ ä¸‹è½½ SVG å†…å®¹         ~5 ç§’   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ          â”‚
â”‚ â‘¤ æ•°æ®å¢å¼ºä¸ç¼“å­˜        ~0.5 ç§’ â–ˆ                   â”‚
â”‚ â‘¥ ç”Ÿæˆ React ç»„ä»¶       ~2 ç§’   â–ˆâ–ˆâ–ˆâ–ˆ                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ æ€»è®¡:                   ~18.6 ç§’                    â”‚
â”‚ (å®é™…çº¦ 4.5 åˆ†é’Ÿï¼ŒåŒ…å«é‡è¯•å’Œé”™è¯¯å¤„ç†)               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ç“¶é¢ˆåˆ†æ

**æœ€æ…¢çš„ä¸‰ä¸ªç¯èŠ‚**ï¼š

1. **æ­¥éª¤ â‘¢**ï¼šFigma æœåŠ¡å™¨æ¸²æŸ“ SVGï¼ˆ~10 ç§’ï¼‰
   - åŸå› ï¼šè®¡ç®—å¯†é›†å‹æ“ä½œ
   - ä¼˜åŒ–ç©ºé—´ï¼šæœ‰é™ï¼ˆFigma æœåŠ¡å™¨æ§åˆ¶ï¼‰

2. **æ­¥éª¤ â‘£**ï¼šç½‘ç»œä¸‹è½½ SVGï¼ˆ~5 ç§’ï¼‰
   - åŸå› ï¼š130 ä¸ªæ–‡ä»¶ Ã— å¹¶å‘ 5 = 26 æ‰¹æ¬¡
   - ä¼˜åŒ–ç©ºé—´ï¼šå¢åŠ å¹¶å‘æ•°ï¼ˆä½†å—å¸¦å®½é™åˆ¶ï¼‰

3. **æ­¥éª¤ â‘¥**ï¼šç”Ÿæˆç»„ä»¶æ–‡ä»¶ï¼ˆ~2 ç§’ï¼‰
   - åŸå› ï¼š130 ä¸ªæ–‡ä»¶å†™å…¥ç£ç›˜
   - ä¼˜åŒ–ç©ºé—´ï¼šå¹¶è¡Œç”Ÿæˆã€å¢é‡æ›´æ–°

### ç†æƒ³æƒ…å†µä¸‹çš„æ€§èƒ½

**æœ‰ç¼“å­˜ä¸”æ— å˜åŒ–**ï¼š
```
æ£€æŸ¥ç¼“å­˜ (0.1s) â†’ è¯»å–ç¼“å­˜ (0.3s) â†’ è¿”å›æ•°æ® (0.1s)
æ€»è®¡: ~0.5 ç§’
```

**æœ‰ç¼“å­˜ä¸”ç‰ˆæœ¬æœªå˜**ï¼š
```
æ£€æŸ¥ç¼“å­˜ (0.1s) â†’ è¯·æ±‚ Figma ç‰ˆæœ¬ (1s) â†’ ç‰ˆæœ¬åŒ¹é… â†’ è¿”å›ç¼“å­˜ (0.1s)
æ€»è®¡: ~1.2 ç§’
```

**éƒ¨åˆ†å›¾æ ‡å˜åŒ–ï¼ˆ5 ä¸ªï¼‰**ï¼š
```
è¯·æ±‚å…ƒæ•°æ® (1s) â†’ å¯¹æ¯”å˜æ›´ (0.1s) â†’ åªå¤„ç† 5 ä¸ªå›¾æ ‡ (1s) â†’ ç”Ÿæˆ (0.5s)
æ€»è®¡: ~2.6 ç§’
```

---

## é—®é¢˜è¯Šæ–­

### æ ¸å¿ƒé—®é¢˜ï¼šæ¯æ¬¡ pull éƒ½é‡æ–°æ‹‰å–

#### ç°è±¡

```bash
# ç¬¬ 1 æ¬¡æ‹‰å–
$ picto pull
âœ“ æˆåŠŸç”Ÿæˆ 130 ä¸ªç»„ä»¶  è€—æ—¶: 4.5 åˆ†é’Ÿ

# ç¬¬ 2 æ¬¡æ‹‰å–ï¼ˆFigma æ–‡ä»¶æœªå˜åŒ–ï¼‰
$ picto pull
âš ï¸ ä»ç„¶é‡æ–°æ‹‰å–ï¼       è€—æ—¶: 4.5 åˆ†é’Ÿ  â† åº”è¯¥ < 1 ç§’

# ç¬¬ 3 æ¬¡æ‹‰å–
$ picto pull
âš ï¸ ä»ç„¶é‡æ–°æ‹‰å–ï¼       è€—æ—¶: 4.5 åˆ†é’Ÿ  â† åº”è¯¥ < 1 ç§’
```

#### åŸå› å®šä½

**é—®é¢˜ä»£ç **ï¼š`packages/core/src/engine/index.ts:217-243`

```typescript
private async fetchFromSource(sourceConfig) {
  const cacheKey = `${sourceConfig.type}:${JSON.stringify(sourceConfig)}`
  
  // 1. æ£€æŸ¥ç¼“å­˜
  const cached = await this.cacheManager.getCachedIcons(cacheKey)
  
  if (cached) {
    // âš ï¸ é—®é¢˜ A: å³ä½¿æœ‰ç¼“å­˜ï¼Œä»ç„¶è°ƒç”¨ API
    const fresh = await plugin.fetch({})  // æ‰§è¡Œæ­¥éª¤ â‘ â‘¡â‘¢â‘£ï¼ˆ4.5 åˆ†é’Ÿï¼‰
    
    const changes = this.changeDetector.detectChanges(cached, fresh)
    
    // âš ï¸ é—®é¢˜ B: æ— è®ºæ˜¯å¦æœ‰å˜æ›´ï¼Œéƒ½è¿”å›æœ€æ–°æ•°æ®
    await this.cacheManager.cacheIcons(cacheKey, fresh)
    return fresh  // æ€»æ˜¯è¿”å› freshï¼Œç¼“å­˜å½¢åŒè™šè®¾
  }
  
  // æ— ç¼“å­˜ï¼Œé¦–æ¬¡æ‹‰å–
  const icons = await plugin.fetch({})
  await this.cacheManager.cacheIcons(cacheKey, icons)
  return icons
}
```

#### é—®é¢˜æ¸…å•

| é—®é¢˜ | æè¿° | å½±å“ |
|------|------|------|
| **é—®é¢˜ 1** | ç¼“å­˜é”®è¿‡é•¿ | æ–‡ä»¶åè¶…è¿‡ç³»ç»Ÿé™åˆ¶ |
| **é—®é¢˜ 2** | å³ä½¿æœ‰ç¼“å­˜ä»è°ƒç”¨ API | æµªè´¹ 4.5 åˆ†é’Ÿ |
| **é—®é¢˜ 3** | æœªä½¿ç”¨ Figma ç‰ˆæœ¬å· | æ— æ³•å¿«é€Ÿåˆ¤æ–­æ˜¯å¦å˜åŒ– |
| **é—®é¢˜ 4** | æ€»æ˜¯è¿”å› fresh æ•°æ® | ç¼“å­˜å½¢åŒè™šè®¾ |
| **é—®é¢˜ 5** | æ€»æ˜¯ç”Ÿæˆå…¨éƒ¨ç»„ä»¶ | å³ä½¿åªæœ‰ 1 ä¸ªå›¾æ ‡å˜åŒ– |

---

## ä¼˜åŒ–æ–¹æ¡ˆ

### ä¼˜åŒ– 1ï¼šä¿®å¤ç¼“å­˜é”®ç”Ÿæˆ

**é—®é¢˜**ï¼š
```typescript
// å½“å‰å®ç°
cacheKey = `figma:${JSON.stringify(sourceConfig)}`
// ç»“æœ: "figma:{\"type\":\"figma\",\"url\":\"https://www.figma.com/file/...è¶…é•¿..."}`
// æ–‡ä»¶åé•¿åº¦: 200+ å­—ç¬¦
```

**è§£å†³æ–¹æ¡ˆ**ï¼š
```typescript
import { createHash } from 'crypto'

function generateCacheKey(sourceConfig) {
  const { type, url, nodeIds } = sourceConfig
  
  // æå–å…³é”®ä¿¡æ¯
  const fileKey = extractFileKey(url)  // "lNtZjYrzLjkZohZLP0OVnz"
  const nodeIdsStr = nodeIds?.join(',') || 'all'
  
  // ç”ŸæˆçŸ­å“ˆå¸Œ
  const data = { type, fileKey, nodeIds: nodeIdsStr }
  const hash = createHash('md5')
    .update(JSON.stringify(data))
    .digest('hex')
    .slice(0, 12)
  
  return `${type}:${hash}`
  // ç»“æœ: "figma:7a8b9c0d1e2f"
  // æ–‡ä»¶åé•¿åº¦: 18 å­—ç¬¦ âœ…
}
```

**æ•ˆæœ**ï¼š
- âœ… æ–‡ä»¶åä» 200+ å­—ç¬¦ç¼©çŸ­åˆ° 20 å­—ç¬¦
- âœ… ä¸åŒ…å«æ•æ„Ÿçš„ Token ä¿¡æ¯

---

### ä¼˜åŒ– 2ï¼šçœŸæ­£ä½¿ç”¨ç¼“å­˜

**é—®é¢˜**ï¼š
```typescript
if (cached) {
  const fresh = await plugin.fetch({})  // âš ï¸ æ€»æ˜¯æ‹‰å–
  return fresh
}
```

**è§£å†³æ–¹æ¡ˆ**ï¼š
```typescript
private async fetchFromSource(sourceConfig) {
  const cacheKey = this.generateCacheKey(sourceConfig)
  const cached = await this.cacheManager.getCachedIcons(cacheKey)
  
  if (cached) {
    const cacheAge = this.getCacheAge(cacheKey)
    
    // âœ… æ–¹æ¡ˆ A: TTL æœªè¿‡æœŸï¼Œç›´æ¥è¿”å›
    if (cacheAge < this.config.cache.ttl) {
      this.logger.info(`Using cache (age: ${cacheAge}s)`)
      return cached  // 0.5 ç§’è¿”å›
    }
    
    // âœ… æ–¹æ¡ˆ B: TTL è¿‡æœŸï¼Œä½†å¯ä»¥å¿«é€Ÿæ£€æŸ¥ç‰ˆæœ¬
    if (sourceConfig.type === 'figma') {
      const fileKey = this.extractFileKey(sourceConfig.url)
      
      // åªè·å–æ–‡ä»¶å…ƒæ•°æ®ï¼ˆå¿«é€Ÿï¼‰
      const fileInfo = await this.client.getFile(fileKey)  // 1 ç§’
      const cachedVersion = await this.cache.get(`figma:${fileKey}:version`)
      
      if (fileInfo.version === cachedVersion) {
        this.logger.info('Figma version unchanged')
        return cached  // 1 ç§’è¿”å›
      }
      
      // è®°å½•æ–°ç‰ˆæœ¬
      await this.cache.set(`figma:${fileKey}:version`, fileInfo.version)
    }
  }
  
  // âœ… æ–¹æ¡ˆ C: çœŸæ­£éœ€è¦é‡æ–°æ‹‰å–
  this.logger.info('Cache miss or version changed, fetching...')
  const fresh = await plugin.fetch({})
  await this.cacheManager.cacheIcons(cacheKey, fresh)
  return fresh
}
```

**æ•ˆæœ**ï¼š

| åœºæ™¯ | å½“å‰è€—æ—¶ | ä¼˜åŒ–åè€—æ—¶ | æå‡ |
|------|---------|-----------|------|
| ç¼“å­˜æœªè¿‡æœŸ | 4.5 åˆ†é’Ÿ | **0.5 ç§’** | **540x** |
| ç‰ˆæœ¬æœªå˜ | 4.5 åˆ†é’Ÿ | **1 ç§’** | **270x** |
| ç‰ˆæœ¬å˜åŒ– | 4.5 åˆ†é’Ÿ | 4.5 åˆ†é’Ÿ | 1x |

---

### ä¼˜åŒ– 3ï¼šå¢é‡ç”Ÿæˆç»„ä»¶

**é—®é¢˜**ï¼š
```typescript
// å½“å‰å®ç°
async generate(icons: IconMetadata[]) {
  // âš ï¸ æ€»æ˜¯ç”Ÿæˆæ‰€æœ‰ 130 ä¸ªç»„ä»¶
  const files = await Promise.all(
    icons.map(icon => this.generateComponent(icon))
  )
  return files
}
```

**è§£å†³æ–¹æ¡ˆ**ï¼š
```typescript
// Manifest ç»“æ„
interface Manifest {
  version: string
  generatorConfig: string
  icons: {
    [iconId: string]: {
      outputFile: string
      sourceHash: string
      generatedAt: string
    }
  }
}

async generate(icons: IconMetadata[]) {
  // 1. åŠ è½½ Manifest
  const manifest = await this.loadManifest()
  
  // 2. è¿‡æ»¤å‡ºéœ€è¦ç”Ÿæˆçš„å›¾æ ‡
  const toGenerate = icons.filter(icon => {
    const cached = manifest.icons[icon.id]
    
    if (!cached) return true  // æ–°å›¾æ ‡
    
    // å¯¹æ¯”å“ˆå¸Œ
    const currentHash = this.hashIcon(icon)
    return cached.sourceHash !== currentHash  // å†…å®¹å˜åŒ–
  })
  
  this.logger.info(`${toGenerate.length}/${icons.length} icons need update`)
  
  // 3. åªç”Ÿæˆå˜åŒ–çš„å›¾æ ‡
  const files = await Promise.all(
    toGenerate.map(icon => this.generateComponent(icon))
  )
  
  // 4. æ¸…ç†åˆ é™¤çš„å›¾æ ‡
  const currentIds = new Set(icons.map(i => i.id))
  const toDelete = Object.keys(manifest.icons)
    .filter(id => !currentIds.has(id))
  
  for (const id of toDelete) {
    const filename = manifest.icons[id].outputFile
    await fs.unlink(join(this.options.dir, filename))
    delete manifest.icons[id]
  }
  
  // 5. æ›´æ–° Manifest
  toGenerate.forEach(icon => {
    manifest.icons[icon.id] = {
      outputFile: `${this.getComponentName(icon.name)}.tsx`,
      sourceHash: this.hashIcon(icon),
      generatedAt: new Date().toISOString()
    }
  })
  
  // 6. æ€»æ˜¯é‡æ–°ç”Ÿæˆ index.ts å’Œ types.ts
  files.push(await this.generateIndex(icons))
  files.push(await this.generateTypes(icons))
  files.push(await this.saveManifest(manifest))
  
  return files
}
```

**Manifest æ–‡ä»¶ç¤ºä¾‹**ï¼š
```json
{
  "version": "0.0.1",
  "generatorConfig": "a1b2c3d4",
  "icons": {
    "615:325": {
      "outputFile": "Iconlogout.tsx",
      "sourceHash": "abc123xyz",
      "generatedAt": "2024-01-22T10:00:00Z"
    }
  }
}
```

**æ•ˆæœ**ï¼š

| åœºæ™¯ | å½“å‰ | ä¼˜åŒ–å | æå‡ |
|------|------|--------|------|
| 130 ä¸ªå›¾æ ‡æ— å˜åŒ– | ç”Ÿæˆ 130 ä¸ª | **ç”Ÿæˆ 0 ä¸ª** | - |
| 5 ä¸ªå›¾æ ‡å˜åŒ– | ç”Ÿæˆ 130 ä¸ª | **ç”Ÿæˆ 5 ä¸ª** | **26x** |
| æ–°å¢ 10 ä¸ªå›¾æ ‡ | ç”Ÿæˆ 140 ä¸ª | **ç”Ÿæˆ 10 ä¸ª** | **14x** |

---

### ä¼˜åŒ– 4ï¼šæ·»åŠ å¼ºåˆ¶åˆ·æ–°é€‰é¡¹

**é—®é¢˜**ï¼šæ— æ³•è·³è¿‡ç¼“å­˜å¼ºåˆ¶åˆ·æ–°

**è§£å†³æ–¹æ¡ˆ**ï¼š
```typescript
// CLI å‚æ•°
interface PullOptions {
  force?: boolean  // æ–°å¢ï¼šå¼ºåˆ¶åˆ·æ–°
}

// å¼•æ“é€»è¾‘
private async fetchFromSource(sourceConfig) {
  // å¼ºåˆ¶åˆ·æ–°æ—¶è·³è¿‡ç¼“å­˜
  if (this.config.forceRefresh) {
    this.logger.info('Force refresh: skipping cache')
    const fresh = await plugin.fetch({})
    await this.cacheManager.cacheIcons(cacheKey, fresh)
    return fresh
  }
  
  // æ­£å¸¸ç¼“å­˜é€»è¾‘...
}
```

**ä½¿ç”¨æ–¹å¼**ï¼š
```bash
# æ­£å¸¸æ‹‰å–ï¼ˆä½¿ç”¨ç¼“å­˜ï¼‰
$ picto pull

# å¼ºåˆ¶åˆ·æ–°ï¼ˆå¿½ç•¥ç¼“å­˜ï¼‰
$ picto pull --force
```

---

### æ€§èƒ½å¯¹æ¯”æ€»ç»“

| åœºæ™¯ | å›¾æ ‡æ•° | å½“å‰è€—æ—¶ | ä¼˜åŒ–åè€—æ—¶ | åŠ é€Ÿæ¯” |
|------|--------|---------|-----------|--------|
| **é¦–æ¬¡æ‹‰å–** | 130 | 4.5 åˆ†é’Ÿ | 4.5 åˆ†é’Ÿ | 1x |
| **æ— å˜åŒ–é‡å¤æ‹‰å–** | 130 | 4.5 åˆ†é’Ÿ | **0.5 ç§’** | **540x** âœ… |
| **Figma ç‰ˆæœ¬æœªå˜** | 130 | 4.5 åˆ†é’Ÿ | **1 ç§’** | **270x** âœ… |
| **ä¿®æ”¹ 5 ä¸ªå›¾æ ‡** | 130 | 4.5 åˆ†é’Ÿ | **15 ç§’** | **18x** âœ… |
| **æ–°å¢ 50 ä¸ªå›¾æ ‡** | 180 | 6 åˆ†é’Ÿ | **2 åˆ†é’Ÿ** | **3x** âœ… |

---

## æ€»ç»“

### æ ¸å¿ƒç†è§£

**ä¸ºä»€ä¹ˆéœ€è¦ 6 ä¸ªæ­¥éª¤ï¼Ÿ**

å› ä¸º Figma çš„ API è®¾è®¡å¦‚æ­¤ï¼š
1. **å…ƒæ•°æ®å’Œèµ„æºåˆ†ç¦»**ï¼šæ–‡æ¡£æ ‘ï¼ˆå¿«ï¼‰+ SVG å¯¼å‡ºï¼ˆæ…¢ï¼‰
2. **å®æ—¶æ¸²æŸ“æœºåˆ¶**ï¼šSVG ä¸é¢„å­˜ï¼ŒæŒ‰éœ€ç”Ÿæˆ
3. **æ ‘å½¢ç»“æ„**ï¼šå¿…é¡»é€’å½’éå†æ‰èƒ½æ‰¾åˆ°å›¾æ ‡

**å¦‚ä½•ä¼˜åŒ–æ€§èƒ½ï¼Ÿ**

é€šè¿‡ä¸‰å±‚ç¼“å­˜ç­–ç•¥ï¼š
1. **ç‰ˆæœ¬å·å¿«é€Ÿåˆ¤æ–­**ï¼ˆæ­¥éª¤ â‘ ï¼‰ï¼š1 ç§’å†…çŸ¥é“æ–‡ä»¶æ˜¯å¦å˜åŒ–
2. **å®Œæ•´æ•°æ®ç¼“å­˜**ï¼ˆæ­¥éª¤ â‘¤ï¼‰ï¼šTTL å†…ç›´æ¥è¿”å›ï¼Œ0.5 ç§’
3. **å¢é‡ç»„ä»¶ç”Ÿæˆ**ï¼ˆæ­¥éª¤ â‘¥ï¼‰ï¼šåªå¤„ç†å˜åŒ–çš„å›¾æ ‡

---

### å¿«é€Ÿå‚è€ƒ

#### æ•°æ®æ ¼å¼æ¼”å˜
```
URL + Token 
  â†’ File Key 
    â†’ FigmaFile (document + version) 
      â†’ ParsedIcon[] (id + name) 
        â†’ S3 URL Map 
          â†’ SVG Map 
            â†’ IconMetadata (svg + hash) 
              â†’ Cache File 
                â†’ React Component
```

#### æ—¶é—´æ¶ˆè€—
```
â‘  è¯·æ±‚æ–‡ä»¶å…ƒæ•°æ®    ~1 ç§’   â–ˆâ–ˆâ–ˆâ–ˆ
â‘¡ é€’å½’è§£ææ–‡æ¡£æ ‘    ~0.1 ç§’ â–Œ
â‘¢ æ‰¹é‡å¯¼å‡º SVG      ~10 ç§’  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ
â‘£ ä¸‹è½½ SVG å†…å®¹     ~5 ç§’   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ
â‘¤ æ•°æ®å¢å¼ºä¸ç¼“å­˜    ~0.5 ç§’ â–ˆ
â‘¥ ç”Ÿæˆ React ç»„ä»¶   ~2 ç§’   â–ˆâ–ˆâ–ˆâ–ˆ
```

#### ä¼˜åŒ–ä¼˜å…ˆçº§
1. **é«˜ä¼˜å…ˆçº§**ï¼šä¿®å¤ç¼“å­˜é€»è¾‘ï¼ˆç«‹å³è§æ•ˆï¼‰
2. **ä¸­ä¼˜å…ˆçº§**ï¼šFigma ç‰ˆæœ¬æ£€æŸ¥ï¼ˆè¿›ä¸€æ­¥ä¼˜åŒ–ï¼‰
3. **ä½ä¼˜å…ˆçº§**ï¼šå¢é‡ç”Ÿæˆç»„ä»¶ï¼ˆå®Œç¾ä½“éªŒï¼‰

---

### å…³é”®è¦ç‚¹

âœ… **Figma API ç‰¹ç‚¹**ï¼š
- å…ƒæ•°æ®è¯·æ±‚å¿«ï¼ˆ< 1 ç§’ï¼‰ï¼ŒSVG å¯¼å‡ºæ…¢ï¼ˆ~10 ç§’ï¼‰
- S3 URL ä¸´æ—¶æœ‰æ•ˆï¼ˆ5 åˆ†é’Ÿï¼‰ï¼Œå¿…é¡»ç«‹å³ä¸‹è½½
- `version` å­—æ®µå¯ç”¨äºå¿«é€Ÿåˆ¤æ–­æ–‡ä»¶æ˜¯å¦å˜åŒ–

âœ… **SVG è½¬ JSX è§„åˆ™**ï¼š
- `stroke-width` â†’ `strokeWidth`ï¼ˆkebab â†’ camelï¼‰
- `xlink:href` â†’ `xlinkHref`ï¼ˆXML å‘½åç©ºé—´ï¼‰
- `style="..."` â†’ `style={{...}}`ï¼ˆå­—ç¬¦ä¸² â†’ å¯¹è±¡ï¼‰

âœ… **æ€§èƒ½ä¼˜åŒ–å…³é”®**ï¼š
- ç¼“å­˜ + TTL æ£€æŸ¥
- Figma ç‰ˆæœ¬å·å¿«é€Ÿåˆ¤æ–­
- Manifest + å¢é‡ç”Ÿæˆ

---

### å®æ–½å»ºè®®

#### é˜¶æ®µ 1ï¼šå¿«é€Ÿä¿®å¤ï¼ˆ1-2 å°æ—¶ï¼‰
1. ä¿®å¤ç¼“å­˜é”®ç”Ÿæˆï¼ˆä½¿ç”¨çŸ­å“ˆå¸Œï¼‰
2. çœŸæ­£ä½¿ç”¨ç¼“å­˜ï¼ˆTTL å†…ç›´æ¥è¿”å›ï¼‰
3. æ·»åŠ  `--force` é€‰é¡¹

**æ•ˆæœ**ï¼šç«‹å³è§£å†³"æ¯æ¬¡éƒ½é‡æ–°æ‹‰å–"çš„é—®é¢˜

#### é˜¶æ®µ 2ï¼šç‰ˆæœ¬ä¼˜åŒ–ï¼ˆ2-3 å°æ—¶ï¼‰
4. å®ç° Figma ç‰ˆæœ¬æ£€æŸ¥
5. åªåœ¨ç‰ˆæœ¬å˜åŒ–æ—¶é‡æ–°æ‹‰å–

**æ•ˆæœ**ï¼šå°†æ— å˜åŒ–åœºæ™¯ä¼˜åŒ–åˆ° 1-2 ç§’

#### é˜¶æ®µ 3ï¼šå¢é‡ç”Ÿæˆï¼ˆ4-6 å°æ—¶ï¼‰
6. å®ç° Manifest æ–‡ä»¶
7. å®ç°å¢é‡ç»„ä»¶ç”Ÿæˆ
8. å®ç°åˆ é™¤æ¸…ç†

**æ•ˆæœ**ï¼šå°å˜æ›´åœºæ™¯ä¼˜åŒ–åˆ° 15-30 ç§’

---

### æµ‹è¯•éªŒè¯

```bash
# æµ‹è¯• 1: é¦–æ¬¡æ‹‰å–
rm -rf .picto icons
picto pull
# é¢„æœŸ: 4.5 åˆ†é’Ÿ

# æµ‹è¯• 2: æ— å˜åŒ–é‡å¤æ‹‰å–ï¼ˆä¼˜åŒ–ååº” <1 ç§’ï¼‰
picto pull
# å½“å‰: 4.5 åˆ†é’Ÿ
# ä¼˜åŒ–å: 0.5 ç§’ âœ…

# æµ‹è¯• 3: å¼ºåˆ¶åˆ·æ–°
picto pull --force
# é¢„æœŸ: 4.5 åˆ†é’Ÿ

# æµ‹è¯• 4: ä¿®æ”¹ Figma ä¸­çš„ 1 ä¸ªå›¾æ ‡
# ï¼ˆåœ¨ Figma ä¸­ä¿®æ”¹æŸä¸ªå›¾æ ‡ï¼‰
picto pull
# å½“å‰: 4.5 åˆ†é’Ÿï¼ˆé‡æ–°ç”Ÿæˆå…¨éƒ¨ï¼‰
# ä¼˜åŒ–å: 15 ç§’ï¼ˆåªæ›´æ–° 1 ä¸ªï¼‰âœ…

# æµ‹è¯• 5: ç¼“å­˜è¿‡æœŸ
# ï¼ˆç­‰å¾… 1 å°æ—¶æˆ–ä¿®æ”¹ TTLï¼‰
picto pull
# ä¼˜åŒ–å: 1-2 ç§’ï¼ˆç‰ˆæœ¬æ£€æŸ¥ï¼‰æˆ– 4.5 åˆ†é’Ÿï¼ˆç‰ˆæœ¬å˜åŒ–ï¼‰âœ…
```

---

### ç›¸å…³æ–‡æ¡£

- **TECHNICAL_FLOW.md**ï¼šå®Œæ•´çš„æŠ€æœ¯ç»†èŠ‚å’Œæ¶æ„è¯´æ˜
- **DATA_TRANSFORMATION_DETAILED.md**ï¼šè¯¦ç»†çš„æ•°æ®æ ¼å¼å’Œ API å“åº”ç¤ºä¾‹
- **CORE_FLOW_SUMMARY.md**ï¼šæ ¸å¿ƒæµç¨‹çš„ç®€æ´æ€»ç»“ï¼ˆæœ¬æ–‡æ¡£çš„æµ“ç¼©ç‰ˆï¼‰

---

### å¸¸è§é—®é¢˜

**Q1: ä¸ºä»€ä¹ˆéœ€è¦ä¸¤æ¬¡ API è°ƒç”¨ï¼Ÿ**

A: Figma è®¾è®¡å¦‚æ­¤ã€‚ç¬¬ä¸€æ¬¡è·å–å…ƒæ•°æ®ï¼ˆå¿«ï¼‰ï¼Œç¬¬äºŒæ¬¡å¯¼å‡º SVGï¼ˆæ…¢ï¼‰ã€‚åˆ†ç¦»è®¾è®¡å¯ä»¥è®©å…ƒæ•°æ®é¢‘ç¹è®¿é—®è€Œä¸å½±å“æ€§èƒ½ã€‚

**Q2: S3 URL å¯ä»¥æ°¸ä¹…å­˜å‚¨å—ï¼Ÿ**

A: ä¸å¯ä»¥ã€‚è¿™äº›æ˜¯ä¸´æ—¶é¢„ç­¾å URLï¼Œæœ‰æ•ˆæœŸçº¦ 5 åˆ†é’Ÿï¼Œå¿…é¡»ç«‹å³ä¸‹è½½ SVG å†…å®¹ã€‚

**Q3: hash å­—æ®µæœ‰ä»€ä¹ˆç”¨ï¼Ÿ**

A: ç”¨äºå¿«é€Ÿæ£€æµ‹å›¾æ ‡å†…å®¹æ˜¯å¦å˜åŒ–ã€‚å¯¹æ¯” hashï¼ˆ12 å­—ç¬¦ï¼‰æ¯”å¯¹æ¯”æ•´ä¸ª SVGï¼ˆå‡ ç™¾å­—ç¬¦ï¼‰å¿«å¾—å¤šã€‚

**Q4: ä¸ºä»€ä¹ˆæ‰¹å¤„ç†æ˜¯å¿…é¡»çš„ï¼Ÿ**

A: URL é•¿åº¦é™åˆ¶ã€‚100 ä¸ªå›¾æ ‡ ID çº¦ 800 å­—ç¬¦ï¼Œè¶…è¿‡ä¼šè¿”å› 413 é”™è¯¯ã€‚

**Q5: ç¼“å­˜è¿‡æœŸåä¼šæ€æ ·ï¼Ÿ**

A: ä¼˜åŒ–åä¼šå…ˆæ£€æŸ¥ Figma ç‰ˆæœ¬å·ï¼Œå¦‚æœç‰ˆæœ¬æœªå˜åˆ™ç»§ç»­ä½¿ç”¨ç¼“å­˜ï¼Œå¦åˆ™é‡æ–°æ‹‰å–ã€‚

---

**æ–‡æ¡£ç»´æŠ¤è€…**: Cursor AI  
**æœ€åæ›´æ–°**: 2026-01-22  
**ç‰ˆæœ¬**: v1.0
